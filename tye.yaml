name: eCommerceApp

extensions:
- name: dapr
  log-level: debug
  config: appconfig
  components-path: "samples/components/tye/"
# - name: zipkin
# - name: elastic
  # logPath: ./.logs

services:

- name: postgres
  image:  postgres
  env:
  - name: POSTGRES_PASSWORD
    value: P@ssw0rd
  bindings:
  - port: 5432
    connectionString: Server=${host};Port=${port};User Id=postgres;Password=${env:POSTGRES_PASSWORD};

- name: redis
  image: redis
  bindings:
  - port: 6379

- name: productapp
  project: samples/Product/ProductService.Application/ProductService.Application.csproj
  env:
  - name: ConnectionStrings__postgres
    value: Server=postgresql;Port=5432;Database=postgres;User Id=postgres;Password=${env:POSTGRES_PASSWORD};
  bindings:
  - port: 5002

- name: customerapp
  project: samples/Customer/CustomerService.Application/CustomerService.Application.csproj
  env:
  - name: ConnectionStrings__postgres
    value: Server=postgresql;Port=5432;Database=postgres;User Id=postgres;Password=${env:POSTGRES_PASSWORD};
  bindings:
  - port: 5003

- name: settingapp
  project: samples/Setting/SettingService.Application/SettingService.Application.csproj
  env:
  - name: ConnectionStrings__postgres
    value: Server=postgresql;Port=5432;Database=postgres;User Id=postgres;Password=${env:POSTGRES_PASSWORD};
  bindings:
  - port: 5005

- name: gatewayapp
  project: samples/AppGateway/AppGateway.csproj
  bindings:
  - port: 5000
